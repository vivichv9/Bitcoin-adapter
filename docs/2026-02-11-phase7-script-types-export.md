# Документация изменений от 2026-02-11 (этап 7: скрипты по публичному ключу)

## Что реализовано
1. Расширен модуль script-типов:
- `src/lib/script-types.js`:
  - добавлен идентификатор `id` для каждого типа;
  - для P2TR формируется descriptor `tr(xonly_pubkey)`;
  - для P2PK локально вычисляется итоговый `scriptPubKey`;
  - расширен формат вывода (descriptor/template/scriptPubKey/address/error);
  - добавлен экспорт в JSON (`toScriptTypesJson`).

2. Обновлена UI-секция script-типов:
- `index.html` добавлены кнопки:
  - `Экспорт JSON`
  - `Экспорт TXT`

3. Обновлена клиентская логика:
- `src/main.js`:
  - форма script-типов стала асинхронной;
  - при валидном RPC-конфиге запрашиваются `deriveaddresses` и `validateaddress` для получения итогового `scriptPubKey` и адреса;
  - добавлен экспорт последнего результата в JSON/TXT.

4. Добавлены тесты:
- `tests/script-types.test.mjs` покрывает:
  - формирование Taproot descriptor;
  - формат текстового вывода;
  - JSON сериализацию.
- `scripts/lint.mjs` обновлен для нового теста.

5. Обновлен README:
- добавлен раздел по расширенному выводу script-типов и экспорту.

## Результат
Блок script-типов теперь показывает не только шаблоны, но и итоговые значения (`scriptPubKey`, адрес), а также умеет экспортировать результат для дальнейшего анализа.
