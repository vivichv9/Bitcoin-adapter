# Документация изменений от 2026-02-11 (этап 3: нормализация и сериализация)

## Что реализовано
1. Добавлен слой нормализации входных данных:
- `src/lib/normalizers.js`;
- `normalizeRawTxInput` приводит hex-поля к canonical виду и строго парсит целые числа;
- `normalizeOpReturnInput` и `normalizePubKeyInput` нормализуют соответствующие формы.

2. Клиентский поток данных обновлен:
- `src/main.js` теперь использует нормализаторы перед валидацией и сериализацией.

3. Усилена защита сериализации:
- `src/lib/tx.js` дополнен проверками входа для unsigned raw tx;
- добавлены проверки txid/vout/amountSats/scriptPubKey и типа payload для OP_RETURN.

4. Расширены проверки качества:
- `tests/normalizers.test.mjs` добавляет тесты нормализации;
- `tests/tx.test.mjs` дополнен негативными кейсами сериализации;
- `scripts/lint.mjs` и `scripts/build.mjs` включают новые файлы.

## Результат
Пайплайн стал устойчивее: форма -> нормализация -> схемная валидация -> сериализация в hex.
Это снижает риск некорректных входов и упрощает расширение новых типов форм.
